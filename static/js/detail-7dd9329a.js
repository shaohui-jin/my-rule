import{h as S,_ as x}from"./_plugin-vue_export-helper-68e29187.js";import{d as h,j as U,k as w,r as d,o as n,c as g,e as a,i as u,F as b,l as C,h as D,m as _,n as B}from"./index-1b7a9618.js";const k={class:"rule-detail"},L=h({__name:"detail",props:{detail:{type:Object,default:()=>({})},operationMode:{type:String,default:"Edit"}},setup(V,{expose:v}){const m=V,p=_(),e=B({ruleCode:"",ruleName:"",ruleType:"module",sceneCategory:"",ruleDesc:"",ruleStatus:"ENABLED"}),f=_([]),y=_([]),E={ruleCode:[{required:!0,message:"请输入规则编码",trigger:"blur"},{max:50,message:"长度不能超过 50 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"只能输入英文、下划线和数字",trigger:"blur"}],ruleName:[{required:!0,message:"请输入规则名称",trigger:"blur"},{max:100,message:"长度不能超过 100 个字符",trigger:"blur"}],ruleType:[{required:!0,message:"请选择规则类型",trigger:"change"}],sceneCategory:[{required:!0,message:"请选择业务场景",trigger:"change"}],ruleDesc:[{required:!0,message:"请输入规则描述",trigger:"blur"},{max:5e3,message:"长度不能超过 5000 个字符",trigger:"blur"}]};async function N(){const{data:t}=await S.post({url:"/umas/common/dict/get",data:{codes:["RULE_TYPE","RULE_BUSINESS"]}});t.length>0&&(f.value=t[0],y.value=t[1])}return U(()=>{N()}),w(()=>m.detail,t=>{t&&(e.ruleCode=t.ruleCode||"",e.ruleName=t.ruleName||"",e.ruleType=t.ruleType||"module",e.sceneCategory=t.sceneCategory||"",e.ruleDesc=t.ruleDesc||"",e.ruleStatus=t.ruleStatus||"ENABLED")},{immediate:!0}),v({validate:t=>{var r;(r=p.value)==null||r.validate(o=>{o&&Object.assign(m.detail,{ruleCode:e.ruleCode,ruleName:e.ruleName,ruleType:e.ruleType,sceneCategory:e.sceneCategory,ruleDesc:e.ruleDesc,ruleStatus:e.ruleStatus}),t(o)})},resetForm:()=>{p.value.resetFields(),Object.assign(e,{ruleCode:"",ruleName:"",ruleType:"",sceneCategory:"",ruleDesc:"",ruleStatus:"ENABLED"})}}),(t,r)=>{const o=d("el-input"),s=d("el-form-item"),i=d("el-option"),c=d("el-select"),T=d("el-form");return n(),g("div",k,[a(T,{ref_key:"formRef",ref:p,model:e,rules:E,"label-width":"100px",class:"rule-form"},{default:u(()=>[a(s,{label:"规则编码",prop:"ruleCode"},{default:u(()=>[a(o,{modelValue:e.ruleCode,"onUpdate:modelValue":r[0]||(r[0]=l=>e.ruleCode=l),placeholder:"请输入规则编码",disabled:m.operationMode==="EDIT"},null,8,["modelValue","disabled"])]),_:1}),a(s,{label:"规则名称",prop:"ruleName"},{default:u(()=>[a(o,{modelValue:e.ruleName,"onUpdate:modelValue":r[1]||(r[1]=l=>e.ruleName=l),placeholder:"请输入规则名称"},null,8,["modelValue"])]),_:1}),a(s,{label:"规则类型",prop:"ruleType"},{default:u(()=>[a(c,{modelValue:e.ruleType,"onUpdate:modelValue":r[2]||(r[2]=l=>e.ruleType=l),placeholder:"请选择规则类型",style:{width:"100%"},disabled:""},{default:u(()=>[(n(!0),g(b,null,C(f.value,l=>(n(),D(i,{key:l.value,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"业务场景",prop:"sceneCategory"},{default:u(()=>[a(c,{modelValue:e.sceneCategory,"onUpdate:modelValue":r[3]||(r[3]=l=>e.sceneCategory=l),placeholder:"请选择业务场景",style:{width:"100%"},disabled:m.operationMode==="EDIT"},{default:u(()=>[(n(!0),g(b,null,C(y.value,l=>(n(),D(i,{key:l.value,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),a(s,{label:"规则描述",prop:"ruleDesc"},{default:u(()=>[a(o,{modelValue:e.ruleDesc,"onUpdate:modelValue":r[4]||(r[4]=l=>e.ruleDesc=l),type:"textarea",rows:4,placeholder:"请输入规则描述"},null,8,["modelValue"])]),_:1}),a(s,{label:"规则状态",prop:"ruleStatus"},{default:u(()=>[a(c,{modelValue:e.ruleStatus,"onUpdate:modelValue":r[5]||(r[5]=l=>e.ruleStatus=l),placeholder:"请选择规则状态",style:{width:"100%"},disabled:""},{default:u(()=>[a(i,{label:"启用",value:"ENABLED"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}});const j=x(L,[["__scopeId","data-v-e4b7c68f"]]);export{j as D};
